{"version":3,"sources":["index.js"],"names":["FreeBoiler","class","onClick","props","React","Component","OccupiyBoiler","StateChanger","this","state","match","State","Boiler","queryState","fetch","mode","then","response","json","data","setState","boilerState","postStateChange","newState","url","concat","method","handleStateChangeResult","requestResult","handleStateChange","result","alert","className","ReactDOM","render","document","getElementById"],"mappings":"8NAIMA,G,6KACM,IAAD,OACP,OACE,6BACE,uBAAGC,MAAM,YAAT,2BACA,4BAAQC,QAAS,kBAAM,EAAKC,MAAMD,QAAQ,UAA1C,gB,GALiBE,IAAMC,YAWzBC,E,uKACM,IAAD,OACP,OACE,6BACE,uBAAIL,MAAM,QAAV,2BACA,4BAAQC,QAAS,kBAAM,EAAKC,MAAMD,QAAQ,cAA1C,kB,GALoBE,IAAMC,WAW5BE,E,uKAEF,OAAIC,KAAKL,MAAMM,MAAMC,MAAM,QAEvB,kBAACJ,EAAD,CAAeJ,QAASM,KAAKL,MAAMD,UAInC,kBAACF,EAAD,CAAYE,QAASM,KAAKL,MAAMD,c,GARbE,IAAMC,WAc3BM,E,uKAEF,OACA,wCAAcH,KAAKL,MAAMM,W,GAHTL,IAAMC,WAQpBO,E,kDACJ,WAAYT,GAAQ,IAAD,8BACjB,cAAMA,IAQRU,WAAa,WAEXC,MADU,SACC,CAACC,KAAM,SACfC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GAAI,OAAI,EAAKC,SAAS,CAACX,MAAOU,EAAKE,kBAb1B,EAgBnBC,gBAAkB,SAACC,GACjB,IAAIC,EAAM,IAERA,EADED,EAASb,MAAM,QACXc,EAAIC,OAAO,cAEXD,EAAIC,OAAO,kBAEnBX,MAAMU,EAAK,CACTE,OAAQ,OACRX,KAAM,SAELC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GAAI,OAAI,EAAKQ,wBAAwBR,EAAKS,mBA5BjC,EAwCnBC,kBAAoB,SAACN,GACnB,EAAKH,SAAS,CAACG,SAAUA,IACzB,EAAKD,gBAAgBC,IAxCrB,EAAKd,MAAQ,CACXA,MAAO,OACPc,SAAU,IAEZ,EAAKV,aANY,E,oEA+BKiB,GACtB,GAAIA,EAAOpB,MAAM,cAAe,CAC9B,IAAIa,EAAWf,KAAKC,MAAMc,SAC1Bf,KAAKY,SAAS,CAACX,MAAOc,SAEtBQ,MAAM,4D,+BAUR,OACE,yBAAKC,UAAU,UACb,yBAAKA,UAAU,gBACb,kBAACrB,EAAD,CAAOF,MAAOD,KAAKC,MAAMA,SAE3B,yBAAKuB,UAAU,iBACb,kBAACzB,EAAD,CAAcL,QAASM,KAAKqB,kBAAmBpB,MAAOD,KAAKC,MAAMA,c,GArDtDL,IAAMC,WA8D3B4B,IAASC,OACP,kBAACtB,EAAD,MACAuB,SAASC,eAAe,W","file":"static/js/main.874006f1.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\nclass FreeBoiler extends React.Component {\n  render() {\n    return (\n      <div>\n        <p class=\"occupied\">Someone is using boiler</p>\n        <button onClick={() => this.props.onClick(\"Free\")}>Free it</button>\n      </div>\n    );\n  }\n}\n\nclass OccupiyBoiler extends React.Component {\n  render() {\n    return (\n      <div>\n        <p  class=\"free\">No one using boiler now</p>\n        <button onClick={() => this.props.onClick(\"Occupied\")}>Occupy it</button>\n      </div>\n    );\n  }\n}\n\nclass StateChanger extends React.Component {\n  render() {\n    if (this.props.state.match(\"Free\")) {\n      return (\n        <OccupiyBoiler onClick={this.props.onClick}/>\n      );\n    } else {\n      return (\n        <FreeBoiler onClick={this.props.onClick}/>\n      );\n    }\n  }\n}\n\nclass State extends React.Component {\n  render() {\n    return (\n    <p>boiler is {this.props.state}</p>\n    );\n  }\n}\n\nclass Boiler extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      state: \"Free\",\n      newState: \"\"\n    };\n    this.queryState();\n  }\n\n  queryState = () => {\n    let url = \"/state\";\n    fetch(url, {mode: 'cors'})\n      .then(response => response.json())\n      .then(data => this.setState({state: data.boilerState}));\n  }\n\n  postStateChange = (newState) => {\n    let url = \"/\";\n    if (newState.match(\"Free\")) {\n      url = url.concat(\"state/free\");\n    } else {\n      url = url.concat(\"state/occupied\");\n    }\n    fetch(url, {\n      method: 'POST',\n      mode: 'cors'\n    })\n      .then(response => response.json())\n      .then(data => this.handleStateChangeResult(data.requestResult));\n  }\n\n  handleStateChangeResult(result) {\n    if (result.match(\"successful\")) {\n      let newState = this.state.newState;\n      this.setState({state: newState});\n    } else {\n      alert(\"change state failed, plase refresh and try again later\");\n    }\n  }\n\n  handleStateChange = (newState) => {\n    this.setState({newState: newState});\n    this.postStateChange(newState);\n  }\n\n  render() {\n    return (\n      <div className=\"boiler\">\n        <div className=\"boiler-state\">\n          <State state={this.state.state}/>\n        </div>\n        <div className=\"State-Changer\">\n          <StateChanger onClick={this.handleStateChange} state={this.state.state} />\n        </div>\n      </div>\n    );\n  }\n}\n\n// ========================================\n\nReactDOM.render(\n  <Boiler />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}